name: ğŸš¨ Ã‰chec CI/CD
description: Signaler un Ã©chec de test ou de dÃ©ploiement dans les workflows GitHub Actions
title: "[CI] Ã‰chec sur "
labels: ["bug", "ci", "urgent"]
assignees: ["vortechstudio"]

body:
  - type: markdown
    attributes:
      value: |
        ## ğŸš¨ Ã‰chec de CI/CD dÃ©tectÃ©

        Utilisez ce template pour signaler un Ã©chec dans les workflows GitHub Actions (tests, dÃ©ploiement, qualitÃ© de code, etc.).

  - type: dropdown
    id: workflow_type
    attributes:
      label: Type de workflow en Ã©chec
      description: Quel workflow a Ã©chouÃ© ?
      options:
        - "ğŸ§ª Tests (tests-on-master)"
        - "ğŸ” QualitÃ© de code (code-quality)"
        - "ğŸ—ï¸ CI Module (module-ci)"
        - "ğŸš€ DÃ©ploiement (module-deployment)"
        - "ğŸ“¦ Release (release)"
        - "ğŸ¤– Automatisation issues (issue-automation)"
        - "ğŸ”’ Fermeture automatique (auto-close-issues)"
        - "Autre workflow"
    validations:
      required: true

  - type: input
    id: branch_name
    attributes:
      label: Branche concernÃ©e
      description: Sur quelle branche l'Ã©chec s'est-il produit ?
      placeholder: "ex: master, develop, feature/nouvelle-fonctionnalite"
    validations:
      required: true

  - type: input
    id: commit_sha
    attributes:
      label: Commit SHA
      description: Identifiant du commit qui a causÃ© l'Ã©chec
      placeholder: "ex: a1b2c3d4e5f6..."
    validations:
      required: true

  - type: input
    id: workflow_run_id
    attributes:
      label: ID du workflow (optionnel)
      description: Lien vers le workflow en Ã©chec
      placeholder: "ex: https://github.com/user/repo/actions/runs/123456789"
    validations:
      required: false

  - type: dropdown
    id: failure_type
    attributes:
      label: Type d'Ã©chec
      description: Quelle est la nature de l'Ã©chec ?
      options:
        - "âŒ Tests unitaires en Ã©chec"
        - "âŒ Tests d'intÃ©gration en Ã©chec"
        - "ğŸ” Ã‰chec de qualitÃ© de code (Pint, PHPStan)"
        - "ğŸš€ Ã‰chec de dÃ©ploiement"
        - "ğŸ“¦ Ã‰chec de build/compilation"
        - "ğŸ—„ï¸ Ã‰chec de migration"
        - "ğŸ”§ Erreur de configuration"
        - "â±ï¸ Timeout"
        - "ğŸŒ ProblÃ¨me de connectivitÃ©"
        - "Autre"
    validations:
      required: true

  - type: textarea
    id: error_details
    attributes:
      label: DÃ©tails de l'erreur
      description: Copiez les logs d'erreur ou dÃ©crivez le problÃ¨me
      placeholder: |
        Exemple :
        ```
        PHPUnit 10.5.0 by Sebastian Bergmann and contributors.

        F                                                                   1 / 1 (100%)

        Time: 00:00.123, Memory: 24.00 MB

        There was 1 failure:

        1) Tests\Feature\ExampleTest::test_example
        Failed asserting that false is true.
        ```
    validations:
      required: true

  - type: dropdown
    id: affected_modules
    attributes:
      label: Modules affectÃ©s
      description: Quels modules sont impactÃ©s par cet Ã©chec ?
      multiple: true
      options:
        - "ğŸ—ï¸ Chantiers"
        - "ğŸ‘¥ RH"
        - "ğŸ¢ Tiers"
        - "ğŸ’¼ Commerce"
        - "âš™ï¸ Core"
        - "ğŸ“¦ Produits/Services"
        - "ğŸ­ GPAO"
        - "ğŸ’° Facturation"
        - "ğŸ“Š ComptabilitÃ©"
        - "ğŸš— VÃ©hicules"
        - "ğŸ“ GED"
        - "ğŸ”§ Infrastructure"
        - "ğŸ¨ Frontend"
        - "Tous les modules"
        - "Aucun module spÃ©cifique"

  - type: dropdown
    id: urgency
    attributes:
      label: Niveau d'urgence
      description: Quel est l'impact de cet Ã©chec ?
      options:
        - "ğŸ”´ Critique - Bloque la production"
        - "ğŸŸ  Haute - Bloque le dÃ©veloppement"
        - "ğŸŸ¡ Moyenne - Impact limitÃ©"
        - "ğŸŸ¢ Basse - Peut attendre"
    validations:
      required: true

  - type: checkboxes
    id: impact_assessment
    attributes:
      label: Ã‰valuation de l'impact
      description: Quels sont les impacts de cet Ã©chec ?
      options:
        - label: "ğŸš« Bloque les dÃ©ploiements"
        - label: "ğŸ”’ Bloque les merges vers master"
        - label: "âš ï¸ Affecte la qualitÃ© du code"
        - label: "ğŸ“Š Impact sur les mÃ©triques de couverture"
        - label: "ğŸ‘¥ Affecte l'Ã©quipe de dÃ©veloppement"
        - label: "ğŸ­ Impact sur l'environnement de production"
        - label: "ğŸ§ª Impact sur l'environnement de test"

  - type: textarea
    id: reproduction_steps
    attributes:
      label: Ã‰tapes de reproduction
      description: Comment reproduire ce problÃ¨me localement ?
      placeholder: |
        1. Cloner la branche `nom-de-la-branche`
        2. Installer les dÃ©pendances avec `composer install`
        3. ExÃ©cuter `php artisan test`
        4. Observer l'erreur...
    validations:
      required: false

  - type: textarea
    id: investigation_done
    attributes:
      label: Investigation dÃ©jÃ  effectuÃ©e
      description: Qu'avez-vous dÃ©jÃ  essayÃ© pour rÃ©soudre le problÃ¨me ?
      placeholder: |
        - VÃ©rifiÃ© les logs du workflow
        - TestÃ© localement sur ma machine
        - ComparÃ© avec le dernier commit fonctionnel
        - VÃ©rifiÃ© les dÃ©pendances...
    validations:
      required: false

  - type: textarea
    id: potential_cause
    attributes:
      label: Cause potentielle
      description: Avez-vous une idÃ©e de ce qui pourrait causer ce problÃ¨me ?
      placeholder: |
        - Changement rÃ©cent dans le code
        - Mise Ã  jour de dÃ©pendance
        - Modification de configuration
        - ProblÃ¨me d'environnement...
    validations:
      required: false

  - type: checkboxes
    id: action_items
    attributes:
      label: Actions Ã  effectuer
      description: Cochez les actions nÃ©cessaires pour rÃ©soudre ce problÃ¨me
      options:
        - label: "ğŸ” Analyser les logs dÃ©taillÃ©s du workflow"
        - label: "ğŸ§ª Reproduire l'erreur localement"
        - label: "ğŸ”„ Relancer le workflow pour confirmer l'Ã©chec"
        - label: "ğŸ“‹ VÃ©rifier les changements rÃ©cents (git diff)"
        - label: "ğŸ”§ VÃ©rifier la configuration des environnements"
        - label: "ğŸ“¦ VÃ©rifier les dÃ©pendances et versions"
        - label: "ğŸ—„ï¸ VÃ©rifier l'Ã©tat de la base de donnÃ©es"
        - label: "ğŸ‘¥ Notifier l'Ã©quipe technique"
        - label: "ğŸ“š Mettre Ã  jour la documentation"

  - type: textarea
    id: additional_context
    attributes:
      label: Contexte supplÃ©mentaire
      description: Toute information supplÃ©mentaire utile
      placeholder: |
        - Liens vers des issues similaires
        - Historique des Ã©checs rÃ©cents
        - Informations sur l'environnement
        - Contraintes de temps...
    validations:
      required: false
